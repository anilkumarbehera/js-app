<!DOCTYPE html>
<html lang="en">
<head>
   
    <link href="../../assets/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript">
        function saveData(event){
            event.preventDefault();
       let elements = document.querySelectorAll("#registration .form-control");
       let product = {};
       for(let item of elements){
           // alert(item.name);
           // alert(item.value);
           // here we will use object of key concept to make it dynamic
           product[item.name] = item.value;

       }

       const url = "http://localhost:3000/products";
       const options = {
            method: "POST",
            headers:{
                "content-type": "application/json"
            },
            body: JSON.stringify(product)
            // json.stringify convert object/array to steam of a string format
       }
       fetch(url, options).then(res=>res.json()).then((res)=>{
        alert("product added successfully");
       }).catch((ex)=>{
        alert("Failed to add product, try later");
       }).finally(()=>{ // finally is used to clear the object
        alert("finally");
       });
   }
   </script>
   
</head>
<body>
    <div class="container">
    <form onsubmit="saveData(event)" id="registration">
        <h2>Product Form</h2>
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="name" class="form-control">
        </div>
        <div class="form-group">
            <label>Price</label>
            <input type="number"  name="price" class="form-control">
        </div>
        <div class="form-group">
            <label>Product Type</label>
            <select class="form-control" name="productType">
                <option>Mobile</option>
                <option>Laptop</option>
                <option>Tab</option>
            </select>
        </div>
        <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="description"></textarea>
        </div>
        <div class="mt-2">
            <input type="submit" class="btn btn-primary" value="save">
            <input type="reset" class="btn btn-secondary" value="clear">
        </div>
    </form>
</div>
</body>
</html>